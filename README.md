# 不良分析 QC7 つ道具システム（買い切り版）

中小工場向けの不良分析に特化した QC7 つ道具自動生成システムです。

## 🎯 システム概要

このシステムは、製造現場の不良データから自動で QC7 つ道具を生成し、品質改善活動を効率化します。

### ✨ 買い切り版の特徴

- ✅ **完全ローカル完結** - インターネット不要で動作
- ✅ **外部 API 不使用** - データは一切外部に送信されません
- ✅ **メンテ不要設計** - 数年後も同じ状態で動作
- ✅ **即納可能** - CSV/Excel アップロード → グラフ画像/PDF 出力が可能

### 📊 対応する QC7 つ道具

1. **パレート図** - 不良項目の重要度を視覚化
2. **特性要因図** - 不良原因の体系的整理
3. **ヒストグラム** - 不良率の分布分析
4. **散布図** - 工程パラメータとの相関分析
5. **管理図** - 工程の安定性監視
6. **チェックシート** - データ収集の標準化
7. **グラフ** - 時系列・比較分析

## 🚀 インストール・起動方法

### 1. 必要なソフトウェア

- Python 3.8 以上
- pip（Python パッケージ管理ツール）

### 2. インストール手順

```bash
# 1. プロジェクトフォルダに移動
cd "QC7つ道具"

# 2. 必要なライブラリをインストール
pip install -r requirements.txt

# 3. アプリケーションを起動
streamlit run app.py
```

### 3. アクセス方法

ブラウザで `http://localhost:8501` にアクセスしてください。

## ☁️ Render へのデプロイ方法

このアプリケーションを Render にデプロイして、インターネット上で公開することができます。

### 前提条件

- GitHub アカウント
- Render アカウント（[https://render.com](https://render.com) で無料登録可能）
- GitHub リポジトリにコードがプッシュされていること

### デプロイ手順

#### 1. GitHub リポジトリの準備

```bash
# 1. Gitリポジトリを初期化（まだの場合）
git init

# 2. すべてのファイルをステージング
git add .

# 3. コミット
git commit -m "Initial commit: QC7つ道具システム"

# 4. GitHubにリポジトリを作成し、プッシュ
git remote add origin https://github.com/あなたのユーザー名/リポジトリ名.git
git branch -M main
git push -u origin main
```

#### 2. Render での設定

1. **Render にログイン**

   - [https://dashboard.render.com](https://dashboard.render.com) にアクセス
   - GitHub アカウントでログイン

2. **新しい Web サービスを作成**

   - 「New +」→「Web Service」を選択
   - GitHub リポジトリを接続
   - リポジトリを選択

3. **サービス設定**

   - **Name**: `qc7-tools-app`（任意の名前）
   - **Environment**: `Python 3`
   - **Build Command**: `pip install -r requirements.txt`
   - **Start Command**: `streamlit run app.py --server.port=$PORT --server.address=0.0.0.0 --server.headless=true`
   - **Plan**: Free プランで開始可能

4. **デプロイ**

   - 「Create Web Service」をクリック
   - ビルドとデプロイが自動的に開始されます（5-10 分程度）

5. **アクセス**
   - デプロイ完了後、Render が提供する URL（例: `https://qc7-tools-app.onrender.com`）でアクセス可能

### 自動デプロイ設定

- **Auto-Deploy**: `Yes` に設定すると、GitHub にプッシュするたびに自動的にデプロイされます
- **Branch**: `main` ブランチを指定（デフォルト）

### 注意事項

⚠️ **無料プランの制限**

- 一定時間無操作後、アプリケーションがスリープします（初回アクセス時に再起動が必要）
- 再起動には 30 秒〜1 分程度かかることがあります
- 有料プランでは常時起動が可能です

⚠️ **環境変数**

- 特に必要な環境変数はありませんが、必要に応じて Render の「Environment」セクションで追加可能です

⚠️ **ファイルサイズ制限**

- アップロードできるファイルサイズには制限があります（通常 100MB 以内）

### トラブルシューティング

**Q: デプロイが失敗します**
A: `requirements.txt` の依存関係に問題がないか確認してください。ビルドログを確認すると詳細なエラーが表示されます。

**Q: アプリケーションが起動しません**
A: `Procfile` と `render.yaml` の内容を確認してください。ポート設定が正しいか確認してください。

**Q: スリープしてしまう**
A: 無料プランの制限です。有料プランにアップグレードするか、外部のキープアライブサービスを使用してください。

## 📁 データ形式

### 対応ファイル形式

- CSV ファイル（UTF-8 エンコーディング推奨）
- Excel ファイル（.xlsx, .xls）

### 必要なデータ項目

| 項目名   | 説明               | 例         |
| -------- | ------------------ | ---------- |
| 日付     | データの日付       | 2024-01-01 |
| 製品名   | 製品の名称         | 製品 A     |
| 不良項目 | 不良の種類         | 寸法不良   |
| 不良数   | 不良の件数         | 5          |
| 検査数   | 検査した件数       | 100        |
| 原因分類 | 不良の原因         | 加工       |
| 発生工程 | 不良が発生した工程 | 旋盤       |
| 備考     | その他の情報       | 工具摩耗   |

### サンプルデータ形式

```csv
日付,製品名,不良項目,不良数,検査数,原因分類,発生工程,備考
2024-01-01,製品A,寸法不良,5,100,加工,旋盤,工具摩耗
2024-01-01,製品A,表面粗さ,3,100,工具,旋盤,切削油不足
2024-01-02,製品B,欠け,2,80,材料,研削,材料不良
```

## 🔧 使用方法

### 1. データのアップロード

1. サイドバーの「データアップロード」から CSV または Excel ファイルを選択
2. または「サンプルデータを生成」ボタンでテストデータを作成

### 2. QC7 つ道具の選択

サイドバーの「QC7 つ道具」から分析したいツールを選択

### 3. 分析結果の確認

各ツールで生成されたグラフや分析結果を確認

### 4. 結果の保存

- グラフは右クリックで画像保存可能
- データは CSV 形式でダウンロード可能

## 📊 各ツールの機能

### パレート図

- 不良項目別の発生件数ランキング
- 累積比率の表示
- 80%ラインによる重点管理項目の特定

### 特性要因図

- 4M（Man, Machine, Material, Method）による原因分類
- 原因別の不良数集計
- 円グラフによる原因分析

### ヒストグラム

- 不良率の分布分析
- 平均・標準偏差・最大値の表示
- 正規分布との比較

### 散布図

- 2 つの変数間の相関分析
- 相関係数の自動計算
- 色分けによる原因分類表示

### 管理図

- p 管理図（不良率管理図）
- 3σ 管理限界の自動計算
- 異常値の自動検出・アラート

### チェックシート

- 不良項目別のチェックリスト
- カスタムチェックリストの生成
- データ収集支援機能

### グラフ

- 時系列グラフ（不良率推移）
- 工程別・製品別・原因別比較
- 複数のグラフタイプに対応

## 🎨 カスタマイズ

### 設定の変更

- グラフの色やスタイルは各ツール画面で調整可能
- データの集計期間や条件を変更可能

### データの追加

- 新しいデータ項目の追加に対応
- カスタム分析項目の設定可能

## 🔍 トラブルシューティング

### よくある問題

**Q: ファイルが読み込めません**
A: ファイルの文字エンコーディングを UTF-8 に変更してください。

**Q: グラフが表示されません**
A: ブラウザの JavaScript が有効になっているか確認してください。

**Q: データが正しく表示されません**
A: データの列名が日本語で正しく設定されているか確認してください。

**Q: アプリケーションが起動しません**
A: 必要なライブラリが正しくインストールされているか確認してください。

## 📞 サポート

### システム要件

- Python 3.8 以上
- メモリ: 4GB 以上推奨
- ストレージ: 1GB 以上の空き容量

### 推奨ブラウザ

- Chrome（最新版）
- Firefox（最新版）
- Safari（最新版）
- Edge（最新版）

## 📝 更新履歴

### v1.0.0 (2024-01-01)

- 初回リリース
- QC7 つ道具の基本機能を実装
- 日本語対応
- サンプルデータ生成機能

## 📄 ライセンス

このプロジェクトは MIT ライセンスの下で公開されています。

## 🤝 貢献

バグ報告や機能要望は、GitHub の Issues ページでお知らせください。

---

**開発者**: QC7 つ道具システム開発チーム  
**最終更新**: 2024 年 1 月 1 日
